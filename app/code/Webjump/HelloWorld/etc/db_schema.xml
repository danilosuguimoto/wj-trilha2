<?xml version="1.0"?>
<!--
/**
 * xml version 1
 *
 * @author Danilo Eidy Ramazzotti Suguimoto
 */
-->
<schema xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd">
    <table name="pet_table" resource="default" engine="innodb">
        <column
            xsi:type="int"
            name="pet_id"
            unsigned="true"
            nullable="false"
            identity="true"
            padding="10"
            comment="ID da entidade"
        />
        <column
            xsi:type="int"
            name="owner_id"
            unsigned="true"
            nullable="false"
            identity="false"
            padding="10"
            comment="ID do dono"
        />
        <column
            xsi:type="varchar"
            name="pet_name"
            nullable="false"
            length="255"
            comment="Nome do pet"
        />
        <column
            xsi:type="varchar"
            name="pet_owner"
            nullable="false"
            length="255"
            comment="Dono do pet"
        />
        <column
            xsi:type="varchar"
            name="owner_phone"
            nullable="false"
            length="255"
            comment="Celular do dono"
        />
        <column
            xsi:type="timestamp"
            name="created_at"
            nullable="false"
            default="CURRENT_TIMESTAMP"
            on_update="false"
            comment="Criado em"
        />
        <column
            xsi:type="timestamp"
            name="updated_at"
            nullable="false"
            default="CURRENT_TIMESTAMP"
            on_update="true"
            comment="Atualizado em"
        />
        <constraint xsi:type="primary" referenceId="PRIMARY">
            <column name="pet_id"/>
        </constraint>
        <constraint xsi:type="foreign"
                    referenceId="PET_TABLE_OWNER_ID_CUSTOMER_ETT_ETT_ID"
                    table="pet_table"
                    column="owner_id"
                    referenceTable="customer_entity"
                    referenceColumn="entity_id"
                    onDelete="CASCADE"/>
        <index referenceId="PET_INT_PET_ID" indexType="btree">
            <column name="pet_id"/>
        </index>
        <index referenceId="PET_INT_OWNER_ID" indexType="btree">
            <column name="owner_id"/>
        </index>
        <index referenceId="PET_VARCHAR_PET_NAME" indexType="btree">
            <column name="pet_name"/>
        </index>
        <index referenceId="PET_VARCHAR_PET_OWNER" indexType="btree">
            <column name="pet_owner"/>
        </index>
        <index referenceId="PET_VARCHAR_OWNER_PHONE" indexType="btree">
            <column name="owner_phone"/>
        </index>
        <index referenceId="PET_TIME_CREATED_AT" indexType="btree">
            <column name="created_at"/>
        </index>
        <index referenceId="PET_TIME_UPDATED_AT" indexType="btree">
            <column name="updated_at"/>
        </index>
    </table>
    <table name="pet_kind" resource="default" engine="innodb">
        <column
            xsi:type="int"
            name="kind_id"
            unsigned="true"
            nullable="false"
            identity="true"
            padding="10"
            comment="ID da entidade"
        />
        <column
            xsi:type="varchar"
            name="name"
            nullable="false"
            length="255"
            comment="Nome do tipo de pet"
        />
        <column
            xsi:type="mediumtext"
            name="description"
            nullable="true"
            comment="Descrição do tipo de pet"
        />
        <column
            xsi:type="timestamp"
            name="created_at"
            nullable="false"
            default="CURRENT_TIMESTAMP"
            on_update="false"
            comment="Criado em"
        />
        <column
            xsi:type="timestamp"
            name="updated_at"
            nullable="false"
            default="CURRENT_TIMESTAMP"
            on_update="true"
            comment="Atualizado em"
        />
        <constraint xsi:type="primary" referenceId="PRIMARY">
            <column name="kind_id"/>
        </constraint>
        <index referenceId="PETKIND_INT_KIND_ID" indexType="btree">
            <column name="kind_id"/>
        </index>
        <index referenceId="PETKIND_VARCHAR_NAME" indexType="btree">
            <column name="name"/>
        </index>
        <index referenceId="PETKIND_TIME_CREATED_AT" indexType="btree">
            <column name="created_at"/>
        </index>
        <index referenceId="PETKIND_TIME_UPDATED_AT" indexType="btree">
            <column name="updated_at"/>
        </index>
    </table>
</schema>
